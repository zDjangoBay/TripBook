<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="800" height="600" viewBox="0 0 800 600">  <!-- Background -->
  <rect width="800" height="600" fill="white"/>
  
  <!-- Title and Legend -->
  <text x="400" y="30" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle">TripBook Entity Relationship Diagram</text>
    <!-- Legend -->
  <rect x="580" y="480" width="200" height="110" rx="5" ry="5" fill="#f5f5f5" stroke="#9e9e9e" stroke-width="1"/>
  <text x="680" y="500" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Legend</text>
  <rect x="590" y="510" width="15" height="15" class="entity"/>
  <text x="613" y="522" font-family="Arial" font-size="12" text-anchor="start">Entity</text>
  <text x="660" y="522" font-family="Arial" font-size="12" text-anchor="start" font-style="italic">(table)</text>
  
  <line x1="590" y1="540" x2="620" y2="540" class="line"/>
  <text x="613" y="552" font-family="Arial" font-size="12" text-anchor="start">Relationship</text>
  
  <text x="590" y="575" font-family="Arial" font-size="12" text-anchor="start" font-weight="bold">PK</text>
  <text x="613" y="575" font-family="Arial" font-size="12" text-anchor="start">Primary Key</text>
  
  <text x="590" y="595" font-family="Arial" font-size="12" text-anchor="start" font-weight="bold">FK</text>
  <text x="613" y="595" font-family="Arial" font-size="12" text-anchor="start">Foreign Key</text>
  
  <!-- Implementation Notes -->
  <rect x="30" y="40" width="250" height="50" rx="5" ry="5" fill="#e8f5e9" stroke="#388e3c" stroke-width="1"/>
  <text x="155" y="60" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Implementation Notes</text>
  <text x="155" y="80" font-family="Arial" font-size="10" text-anchor="middle">Use UUID for all primary keys for better scalability</text>
  
  <!-- Styles -->
  <style>
    .entity {
      fill: #e1f5fe;
      stroke: #0288d1;
      stroke-width: 2;
    }
    .relationship {
      fill: #fff9c4;
      stroke: #fbc02d;
      stroke-width: 2;
    }
    .label {
      font-family: Arial, sans-serif;
      font-size: 14px;
      text-anchor: middle;
    }
    .entity-label {
      font-weight: bold;
      font-size: 16px;
    }
    .line {
      stroke: #424242;
      stroke-width: 1.5;
    }
    .cardinality {
      font-family: Arial, sans-serif;
      font-size: 12px;
      font-weight: bold;
    }
    .attribute {
      font-family: Arial, sans-serif;
      font-size: 12px;
      text-anchor: start;
    }
    .pk {
      font-weight: bold;
      text-decoration: underline;
    }
  </style>
  <!-- User Entity -->
  <rect x="50" y="100" width="160" height="200" rx="5" ry="5" class="entity" />
  <text x="130" y="125" class="label entity-label">User</text>
  <text x="60" y="150" class="attribute pk">user_id: UUID (PK)</text>
  <text x="60" y="170" class="attribute">username: VARCHAR(50)</text>
  <text x="60" y="190" class="attribute">email: VARCHAR(100)</text>
  <text x="60" y="210" class="attribute">password_hash: VARCHAR(255)</text>
  <text x="60" y="230" class="attribute">profile_pic_url: VARCHAR(255)</text>
  <text x="60" y="250" class="attribute">created_at: TIMESTAMP</text>
  <text x="60" y="270" class="attribute">last_login: TIMESTAMP</text>
  <text x="60" y="290" class="attribute">is_active: BOOLEAN</text>

  <!-- Post Entity -->
  <rect x="400" y="100" width="160" height="200" rx="5" ry="5" class="entity" />
  <text x="480" y="125" class="label entity-label">Post</text>
  <text x="410" y="150" class="attribute pk">post_id: UUID (PK)</text>
  <text x="410" y="170" class="attribute">user_id: UUID (FK)</text>
  <text x="410" y="190" class="attribute">destination_id: UUID (FK)</text>
  <text x="410" y="210" class="attribute">title: VARCHAR(100)</text>
  <text x="410" y="230" class="attribute">content: TEXT</text>
  <text x="410" y="250" class="attribute">location_data: JSONB</text>
  <text x="410" y="270" class="attribute">created_at: TIMESTAMP</text>
  <text x="410" y="290" class="attribute">updated_at: TIMESTAMP</text>
  <!-- Destination Entity -->
  <rect x="400" y="380" width="160" height="180" rx="5" ry="5" class="entity" />
  <text x="480" y="405" class="label entity-label">Destination</text>
  <text x="410" y="430" class="attribute pk">destination_id: UUID (PK)</text>
  <text x="410" y="450" class="attribute">name: VARCHAR(100)</text>
  <text x="410" y="470" class="attribute">country: VARCHAR(50)</text>
  <text x="410" y="490" class="attribute">coordinates: POINT</text>
  <text x="410" y="510" class="attribute">description: TEXT</text>
  <text x="410" y="530" class="attribute">popularity_score: INTEGER</text>
  <text x="410" y="550" class="attribute">created_at: TIMESTAMP</text>

  <!-- TravelAgency Entity -->
  <rect x="50" y="380" width="160" height="180" rx="5" ry="5" class="entity" />
  <text x="130" y="405" class="label entity-label">TravelAgency</text>
  <text x="60" y="430" class="attribute pk">agency_id: UUID (PK)</text>
  <text x="60" y="450" class="attribute">name: VARCHAR(100)</text>
  <text x="60" y="470" class="attribute">contact_info: JSONB</text>
  <text x="60" y="490" class="attribute">website: VARCHAR(255)</text>
  <text x="60" y="510" class="attribute">location: JSONB</text>
  <text x="60" y="530" class="attribute">verified: BOOLEAN</text>
  <text x="60" y="550" class="attribute">created_at: TIMESTAMP</text>

  <!-- Media Entity -->
  <rect x="650" y="100" width="140" height="160" rx="5" ry="5" class="entity" />
  <text x="720" y="125" class="label entity-label">Media</text>
  <text x="660" y="150" class="attribute pk">media_id: UUID (PK)</text>
  <text x="660" y="170" class="attribute">post_id: UUID (FK)</text>
  <text x="660" y="190" class="attribute">file_url: VARCHAR(255)</text>
  <text x="660" y="210" class="attribute">type: VARCHAR(50)</text>
  <text x="660" y="230" class="attribute">size: INTEGER</text>
  <text x="660" y="250" class="attribute">created_at: TIMESTAMP</text>
  <!-- Comment Entity -->
  <rect x="650" y="300" width="140" height="160" rx="5" ry="5" class="entity" />
  <text x="720" y="325" class="label entity-label">Comment</text>
  <text x="660" y="350" class="attribute pk">comment_id: UUID (PK)</text>
  <text x="660" y="370" class="attribute">post_id: UUID (FK)</text>
  <text x="660" y="390" class="attribute">user_id: UUID (FK)</text>
  <text x="660" y="410" class="attribute">content: TEXT</text>
  <text x="660" y="430" class="attribute">created_at: TIMESTAMP</text>
  <text x="660" y="450" class="attribute">updated_at: TIMESTAMP</text>

  <!-- Rating Entity -->
  <rect x="220" y="480" width="140" height="160" rx="5" ry="5" class="entity" />
  <text x="290" y="505" class="label entity-label">Rating</text>
  <text x="230" y="530" class="attribute pk">rating_id: UUID (PK)</text>
  <text x="230" y="550" class="attribute">user_id: UUID (FK)</text>
  <text x="230" y="570" class="attribute">agency_id: UUID (FK)</text>
  <text x="230" y="590" class="attribute">score: DECIMAL(2,1)</text>
  <text x="230" y="610" class="attribute">review: TEXT</text>
  <text x="230" y="630" class="attribute">created_at: TIMESTAMP</text>
  <!-- Relationship: User creates Post -->
  <line x1="210" y1="190" x2="400" y2="190" class="line" />
  <text x="220" y1="180" class="cardinality">1</text>
  <text x="390" y1="180" class="cardinality">N</text>
  <text x="305" y="170" class="label">Creates</text>
  <text x="305" y="185" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">(user_id is FK in Post)</text>

  <!-- Relationship: Post references Destination -->
  <line x1="480" y1="300" x2="480" y2="380" class="line" />
  <text x="470" y1="310" class="cardinality">N</text>
  <text x="470" y1="370" class="cardinality">1</text>
  <text x="510" y="340" class="label">References</text>
  <text x="510" y="355" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">(destination_id is FK in Post)</text>

  <!-- Relationship: Post has Media -->
  <line x1="560" y1="170" x2="650" y2="170" class="line" />
  <text x="570" y1="160" class="cardinality">1</text>
  <text x="640" y1="160" class="cardinality">N</text>
  <text x="605" y="150" class="label">Has</text>
  <text x="605" y="165" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">(post_id is FK in Media)</text>
  <!-- Relationship: Post has Comments -->
  <line x1="480" y1="280" x2="650" y2="350" class="line" />
  <text x="490" y1="290" class="cardinality">1</text>
  <text x="640" y1="340" class="cardinality">N</text>
  <text x="560" y="300" class="label">Has</text>
  <text x="560" y="315" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">(post_id is FK in Comment)</text>

  <!-- Relationship: User gives Ratings -->
  <line x1="130" y1="280" x2="240" y2="480" class="line" />
  <text x="140" y1="290" class="cardinality">1</text>
  <text x="230" y1="470" class="cardinality">N</text>
  <text x="170" y="350" class="label">Gives</text>
  <text x="170" y="365" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">(user_id is FK in Rating)</text>

  <!-- Relationship: Rating for TravelAgency -->
  <line x1="220" y1="530" x2="130" y2="530" class="line" />
  <text x="210" y1="520" class="cardinality">N</text>
  <text x="140" y1="520" class="cardinality">1</text>
  <text x="175" y="550" class="label">For</text>
  <text x="175" y="565" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">(agency_id is FK in Rating)</text>

  <!-- Relationship: User comments on Post -->
  <line x1="210" y1="170" x2="650" y2="380" class="line" />
  <text x="220" y1="165" class="cardinality">1</text>
  <text x="640" y1="370" class="cardinality">N</text>
  <text x="400" y="270" class="label">Comments On</text>
  <text x="400" y="285" font-family="Arial" font-size="10" text-anchor="middle" fill="#666">(user_id is FK in Comment)</text>
</svg>